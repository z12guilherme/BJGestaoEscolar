{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10" id="dashboard">
        <!-- Welcome Section -->
        <div class="card mb-4 login-card">
            <div class="card-header">
                <div class="text-center mb-3">
                    <i class="fas fa-graduation-cap fa-3x" style="color: #a0aec0;"></i>
                </div>
                <h3 class="card-title text-center">Dashboard</h3>
                <p class="text-center mb-0" style="color: #bbb;">Bem-vindo, {{ session.username }}!</p>
            </div>
            <div class="card-body text-center">
                <p>Você está logado no sistema. Gerencie os cadastros abaixo.</p>
            </div>
        </div>

        {% if session.role == 'SecretarioEducacao' %}
        <!-- Superuser Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card login-card">
                    <div class="card-header">
                        <h4 class="card-title text-center">Gerenciamento</h4>
                    </div>
                    <div class="card-body text-center">
                        <a href="{{ url_for('manage_users') }}" class="btn btn-warning">Gerenciar Usuários</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        {% if turmas %}
        <!-- Teacher's Turmas Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card login-card">
                    <div class="card-header">
                        <h4 class="card-title text-center">Suas Turmas</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            {% for turma in turmas %}
                            <div class="col-md-6 mb-3">
                                <div class="card h-100">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">{{ turma.name }} (Ano: {{ turma.year or 'N/A' }})</h5>
                                        <p class="card-text">Escola: {{ turma.school.name }}</p>
                                        <a href="{{ url_for('manage_turma', turma_id=turma.id) }}" class="btn btn-primary">Gerenciar Alunos</a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- Registration Options -->
        <div class="row">
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('register_school') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-school fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Cadastrar Escola</h5>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('register_student') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-user-graduate fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Cadastrar Aluno</h5>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('register_teacher') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-chalkboard-teacher fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Cadastrar Professor</h5>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('register_turma') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-users fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Cadastrar Turma</h5>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        {% if session.role in ['Professor', 'SecretarioEducacao'] %}
        <!-- Grade Management Options -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <a href="{{ url_for('add_nota') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-plus fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Cadastrar Notas</h5>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-6 mb-3">
                <a href="{{ url_for('relatorios') }}" class="text-decoration-none">
                    <div class="card h-100 login-card">
                        <div class="card-body text-center">
                            <i class="fas fa-clipboard-list fa-3x" style="color: #a0aec0; margin-bottom: 1rem;"></i>
                            <h5 class="card-title">Relatórios</h5>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        {% endif %}

        <!-- Logout -->
        <div class="text-center mt-4">
            <a href="{{ url_for('logout') }}" class="btn btn-danger">Logout</a>
        </div>
    </div>
</div>
{% endblock %}
